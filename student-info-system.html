<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>上海第二工业大学学生信息管理系统</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="font-awesome.min.css" rel="stylesheet">
    
    <!-- 配置Tailwind自定义颜色 -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#165DFF',
                        secondary: '#36CFC9',
                        accent: '#722ED1',
                        neutral: '#F5F7FA',
                        'neutral-dark': '#1D2129',
                    },
                    fontFamily: {
                        sans: ['Inter', 'system-ui', 'sans-serif'],
                    },
                }
            }
        }
    </script>
    
    <!-- 自定义工具类 -->
    <style type="text/tailwindcss">
        @layer utilities {
            .content-auto {
                content-visibility: auto;
            }
            .form-input-focus {
                @apply focus:ring-2 focus:ring-primary/50 focus:border-primary focus:outline-none;
            }
            .card-shadow {
                @apply shadow-lg hover:shadow-xl transition-shadow duration-300;
            }
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen font-sans text-neutral-dark">
    <!-- 页面容器 -->
    <div class="container mx-auto px-4 py-8 max-w-6xl">
        <!-- 头部标题 -->
        <header class="text-center mb-10">
            <div class="flex items-center justify-center mb-3">
                <img src="images/校徽.jpg" alt="上海第二工业大学校徽" class="w-15 h-12 mr-3">
                <h1 class="text-[clamp(1.5rem,3vw,2rem)] font-bold text-primary">上海第二工业大学</h1>
            </div>
            <p class="text-gray-600 text-lg">学生信息管理系统</p>
        </header>
        
        <!-- 主内容区 -->
        <main>
            <!-- 登录表单 -->
            <section id="login-section" class="max-w-md mx-auto bg-white rounded-xl p-8 card-shadow">
                <h2 class="text-2xl font-bold text-center mb-6 text-neutral-dark">用户登录</h2>
                
                <form id="login-form" class="space-y-5">
                    <div>
                        <label for="login-username" class="block text-sm font-medium text-gray-700 mb-1">用户名</label>
                        <div class="relative">
                            <span class="absolute inset-y-0 left-0 flex items-center pl-3 text-gray-500">
                                <i class="fa fa-user"></i>
                            </span>
                            <input type="text" id="login-username" name="login-username" 
                                class="w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg form-input-focus transition duration-200"
                                required>
                        </div>
                    </div>
                    
                    <div>
                        <label for="login-password" class="block text-sm font-medium text-gray-700 mb-1">密码</label>
                        <div class="relative">
                            <span class="absolute inset-y-0 left-0 flex items-center pl-3 text-gray-500">
                                <i class="fa fa-lock"></i>
                            </span>
                            <input type="password" id="login-password" name="login-password" 
                                class="w-full pl-10 pr-10 py-2 border border-gray-300 rounded-lg form-input-focus transition duration-200"
                                required>
                            <button type="button" id="toggle-login-password" class="absolute inset-y-0 right-0 flex items-center pr-3 text-gray-500 hover:text-primary transition-colors">
                                <i class="fa fa-eye-slash"></i>
                            </button>
                        </div>
                    </div>
                    
                    <div class="flex items-center justify-between">
                        <div class="flex items-center">
                            <input id="remember-me" name="remember-me" type="checkbox" 
                                class="h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded">
                            <label for="remember-me" class="ml-2 block text-sm text-gray-700">
                                记住我
                            </label>
                        </div>
                        <a href="#" class="text-sm text-primary hover:text-primary/80 transition-colors">
                            忘记密码?
                        </a>
                    </div>
                    
                    <div>
                        <button type="submit" 
                            class="w-full bg-primary hover:bg-primary/90 text-white font-medium py-2 px-4 rounded-lg transition duration-200 flex items-center justify-center">
                            <i class="fa fa-sign-in mr-2"></i> 登录
                        </button>
                    </div>
                </form>
                
                <div class="mt-6 text-center">
                    <p class="text-gray-600">
                        还没有账号? <button id="show-register" class="text-primary font-medium hover:underline">立即注册</button>
                    </p>
                </div>
            </section>
            
            <!-- 注册表单 -->
            <section id="register-section" class="max-w-md mx-auto bg-white rounded-xl p-8 card-shadow hidden">
                <h2 class="text-2xl font-bold text-center mb-6 text-neutral-dark">用户注册</h2>
                
                <form id="register-form" class="space-y-5">
                    <div>
                        <label for="register-username" class="block text-sm font-medium text-gray-700 mb-1">用户名</label>
                        <div class="relative">
                            <span class="absolute inset-y-0 left-0 flex items-center pl-3 text-gray-500">
                                <i class="fa fa-user-plus"></i>
                            </span>
                            <input type="text" id="register-username" name="register-username" 
                                class="w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg form-input-focus transition duration-200"
                                required>
                        </div>
                    </div>
                    
                    <div>
                        <label for="register-password" class="block text-sm font-medium text-gray-700 mb-1">密码</label>
                        <div class="relative">
                            <span class="absolute inset-y-0 left-0 flex items-center pl-3 text-gray-500">
                                <i class="fa fa-lock"></i>
                            </span>
                            <input type="password" id="register-password" name="register-password" 
                                class="w-full pl-10 pr-10 py-2 border border-gray-300 rounded-lg form-input-focus transition duration-200"
                                required>
                            <button type="button" id="toggle-register-password" class="absolute inset-y-0 right-0 flex items-center pr-3 text-gray-500 hover:text-primary transition-colors">
                                <i class="fa fa-eye-slash"></i>
                            </button>
                        </div>
                        <p id="password-hint" class="mt-1 text-xs text-gray-500">
                            密码至少8个字符，需包含英文符号、字母和数字
                        </p>
                        <p id="password-validation" class="mt-1 text-xs hidden"></p>
                    </div>
                    
                    <div>
                        <label for="confirm-password" class="block text-sm font-medium text-gray-700 mb-1">确认密码</label>
                        <div class="relative">
                            <span class="absolute inset-y-0 left-0 flex items-center pl-3 text-gray-500">
                                <i class="fa fa-lock"></i>
                            </span>
                            <input type="password" id="confirm-password" name="confirm-password" 
                                class="w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg form-input-focus transition duration-200"
                                required>
                        </div>
                        <p id="password-match" class="mt-1 text-xs hidden"></p>
                    </div>
                    
                    <div>
                        <button type="submit" 
                            class="w-full bg-primary hover:bg-primary/90 text-white font-medium py-2 px-4 rounded-lg transition duration-200 flex items-center justify-center">
                            <i class="fa fa-user-plus mr-2"></i> 注册
                        </button>
                    </div>
                </form>
                
                <div class="mt-6 text-center">
                    <p class="text-gray-600">
                        已有账号? <button id="show-login" class="text-primary font-medium hover:underline">登录</button>
                    </p>
                </div>
            </section>
            
            <!-- 学生信息表单 -->
            <section id="student-info-section" class="max-w-4xl mx-auto bg-white rounded-xl p-8 card-shadow hidden">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-2xl font-bold text-neutral-dark">学生信息填写</h2>
                    <button id="logout-btn" class="text-gray-600 hover:text-red-500 transition-colors flex items-center">
                        <i class="fa fa-sign-out mr-1"></i> 退出登录
                    </button>
                </div>
                
                <form id="student-info-form" class="space-y-6">
                    <!-- 基本信息 -->
                    <div class="border-b border-gray-200 pb-6">
                        <h3 class="text-lg font-semibold mb-4 text-gray-800">基本信息</h3>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-5">
                            <div>
                                <label for="student-id" class="block text-sm font-medium text-gray-700 mb-1">学号 <span class="text-red-500">*</span></label>
                                <input type="text" id="student-id" name="student-id" required
                                    class="w-full px-3 py-2 border border-gray-300 rounded-lg form-input-focus transition duration-200">
                            </div>
                            
                            <div>
                                <label for="name" class="block text-sm font-medium text-gray-700 mb-1">姓名 <span class="text-red-500">*</span></label>
                                <input type="text" id="name" name="name" required
                                    class="w-full px-3 py-2 border border-gray-300 rounded-lg form-input-focus transition duration-200">
                            </div>
                            
                            <div>
                                <label for="nationality" class="block text-sm font-medium text-gray-700 mb-1">民族 <span class="text-red-500">*</span></label>
                                <input type="text" id="nationality" name="nationality" required
                                    class="w-full px-3 py-2 border border-gray-300 rounded-lg form-input-focus transition duration-200">
                            </div>
                            
                            <div>
                                <label for="political-status" class="block text-sm font-medium text-gray-700 mb-1">政治面貌 <span class="text-red-500">*</span></label>
                                <select id="political-status" name="political-status" required
                                    class="w-full px-3 py-2 border border-gray-300 rounded-lg form-input-focus transition duration-200 bg-white">
                                    <option value="">请选择</option>
                                    <option value="党员">党员</option>
                                    <option value="团员">团员</option>
                                    <option value="群众">群众</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 联系信息 -->
                    <div class="border-b border-gray-200 pb-6">
                        <h3 class="text-lg font-semibold mb-4 text-gray-800">联系信息</h3>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-5">
                            <div>
                                <label for="address" class="block text-sm font-medium text-gray-700 mb-1">通讯地址 <span class="text-red-500">*</span></label>
                                <input type="text" id="address" name="address" required
                                    class="w-full px-3 py-2 border border-gray-300 rounded-lg form-input-focus transition duration-200">
                            </div>
                            
                            <div>
                                <label for="postal-code" class="block text-sm font-medium text-gray-700 mb-1">邮政编码 <span class="text-red-500">*</span></label>
                                <input type="text" id="postal-code" name="postal-code" required
                                    class="w-full px-3 py-2 border border-gray-300 rounded-lg form-input-focus transition duration-200">
                            </div>
                            
                            <div>
                                <label for="phone" class="block text-sm font-medium text-gray-700 mb-1">手机号码 <span class="text-red-500">*</span></label>
                                <input type="tel" id="phone" name="phone" required
                                    class="w-full px-3 py-2 border border-gray-300 rounded-lg form-input-focus transition duration-200">
                            </div>
                            
                            <div>
                                <label for="email" class="block text-sm font-medium text-gray-700 mb-1">电子邮箱 <span class="text-red-500">*</span></label>
                                <input type="email" id="email" name="email" required
                                    class="w-full px-3 py-2 border border-gray-300 rounded-lg form-input-focus transition duration-200">
                            </div>
                        </div>
                    </div>
                    
                    <!-- 户籍与出生信息 -->
                    <div class="border-b border-gray-200 pb-6">
                        <h3 class="text-lg font-semibold mb-4 text-gray-800">户籍与出生信息</h3>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-5">
                            <div>
                                <label for="household-type" class="block text-sm font-medium text-gray-700 mb-1">户口性质 <span class="text-red-500">*</span></label>
                                <select id="household-type" name="household-type" required
                                    class="w-full px-3 py-2 border border-gray-300 rounded-lg form-input-focus transition duration-200 bg-white">
                                    <option value="">请选择</option>
                                    <option value="农业户口">农业户口</option>
                                    <option value="非农业户口">非农业户口</option>
                                </select>
                            </div>
                            
                            <div>
                                <label for="birthdate" class="block text-sm font-medium text-gray-700 mb-1">出生日期 (yyyymmdd) <span class="text-red-500">*</span></label>
                                <input type="text" id="birthdate" name="birthdate" placeholder="例如: 20000101" required
                                    class="w-full px-3 py-2 border border-gray-300 rounded-lg form-input-focus transition duration-200">
                            </div>
                            
                            <div class="md:col-span-2">
                                <label class="block text-sm font-medium text-gray-700 mb-1">出生地 <span class="text-red-500">*</span></label>
                                <div class="grid grid-cols-1 sm:grid-cols-3 gap-3">
                                    <select id="province" name="province" required
                                        class="w-full px-3 py-2 border border-gray-300 rounded-lg form-input-focus transition duration-200 bg-white">
                                        <option value="">请选择省份</option>
                                        <!-- 省份数据将通过JavaScript动态加载 -->
                                    </select>
                                    
                                    <select id="city" name="city" disabled required
                                        class="w-full px-3 py-2 border border-gray-300 rounded-lg form-input-focus transition duration-200 bg-gray-50">
                                        <option value="">请先选择省份</option>
                                        <!-- 城市数据将通过JavaScript动态加载 -->
                                    </select>
                                    
                                    <select id="district" name="district" disabled required
                                        class="w-full px-3 py-2 border border-gray-300 rounded-lg form-input-focus transition duration-200 bg-gray-50">
                                        <option value="">请先选择城市</option>
                                        <!-- 区县数据将通过JavaScript动态加载 -->
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 家庭信息 -->
                    <div class="border-b border-gray-200 pb-6">
                        <h3 class="text-lg font-semibold mb-4 text-gray-800">家庭信息</h3>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-5">
                            <div>
                                <label for="father-name" class="block text-sm font-medium text-gray-700 mb-1">父亲姓名 <span class="text-red-500">*</span></label>
                                <input type="text" id="father-name" name="father-name" required
                                    class="w-full px-3 py-2 border border-gray-300 rounded-lg form-input-focus transition duration-200">
                            </div>
                            
                            <div>
                                <label for="father-phone" class="block text-sm font-medium text-gray-700 mb-1">父亲手机号 <span class="text-red-500">*</span></label>
                                <input type="tel" id="father-phone" name="father-phone" required
                                    class="w-full px-3 py-2 border border-gray-300 rounded-lg form-input-focus transition duration-200">
                            </div>
                            
                            <div>
                                <label for="mother-name" class="block text-sm font-medium text-gray-700 mb-1">母亲姓名 <span class="text-red-500">*</span></label>
                                <input type="text" id="mother-name" name="mother-name" required
                                    class="w-full px-3 py-2 border border-gray-300 rounded-lg form-input-focus transition duration-200">
                            </div>
                            
                            <div>
                                <label for="mother-phone" class="block text-sm font-medium text-gray-700 mb-1">母亲手机号 <span class="text-red-500">*</span></label>
                                <input type="tel" id="mother-phone" name="mother-phone" required
                                    class="w-full px-3 py-2 border border-gray-300 rounded-lg form-input-focus transition duration-200">
                            </div>
                        </div>
                    </div>
                    
                    <!-- 教育背景 -->
                    <div>
                        <h3 class="text-lg font-semibold mb-4 text-gray-800">教育背景</h3>
                        
                        <div>
                            <label for="high-school" class="block text-sm font-medium text-gray-700 mb-1">高中毕业学校 <span class="text-red-500">*</span></label>
                            <input type="text" id="high-school" name="high-school" required
                                class="w-full px-3 py-2 border border-gray-300 rounded-lg form-input-focus transition duration-200">
                        </div>
                    </div>
                    
                    <!-- 提交按钮 -->
                    <div class="flex justify-center mt-8">
                        <button type="submit" 
                            class="bg-primary hover:bg-primary/90 text-white font-medium py-2 px-8 rounded-lg transition duration-200 flex items-center">
                            <i class="fa fa-save mr-2"></i> 保存信息
                        </button>
                    </div>
                </form>
            </section>
        </main>
        
        <!-- 页脚 -->
        <footer class="mt-16 text-center text-gray-500 text-sm">
            <p>© 2023 上海第二工业大学 学生信息管理系统 - 版权所有</p>
        </footer>
    </div>
    
    <!-- 消息提示框 -->
    <div id="toast" class="fixed top-4 right-4 px-6 py-3 rounded-lg shadow-lg transform transition-all duration-300 translate-x-full opacity-0 flex items-center">
        <i id="toast-icon" class="mr-2"></i>
        <span id="toast-message"></span>
    </div>

    <script>
// 页面加载完成后执行
document.addEventListener('DOMContentLoaded', function() {
    // DOM元素引用
    const loginSection = document.getElementById('login-section');
    const registerSection = document.getElementById('register-section');
    const studentInfoSection = document.getElementById('student-info-section');
    const showRegisterBtn = document.getElementById('show-register');
    const showLoginBtn = document.getElementById('show-login');
    const logoutBtn = document.getElementById('logout-btn');
    const toggleLoginPassword = document.getElementById('toggle-login-password');
    const toggleRegisterPassword = document.getElementById('toggle-register-password');
    const loginPassword = document.getElementById('login-password');
    const registerPassword = document.getElementById('register-password');
    const confirmPassword = document.getElementById('confirm-password');
    const passwordValidation = document.getElementById('password-validation');
    const passwordMatch = document.getElementById('password-match');
    const toast = document.getElementById('toast');
    const toastIcon = document.getElementById('toast-icon');
    const toastMessage = document.getElementById('toast-message');
    
    // 登录表单
    const loginForm = document.getElementById('login-form');
    // 注册表单
    const registerForm = document.getElementById('register-form');
    // 学生信息表单
    const studentInfoForm = document.getElementById('student-info-form');
    
    // 地区选择相关元素
    const provinceSelect = document.getElementById('province');
    const citySelect = document.getElementById('city');
    const districtSelect = document.getElementById('district');
    
    // 定义直辖市列表
    const municipalities = ["北京市", "上海市", "天津市", "重庆市"];
    
    // 地区数据
    const locationData = {
        "北京市": {
            "北京市": ["东城区", "西城区", "朝阳区", "丰台区", "石景山区", "海淀区", "顺义区", "通州区", "大兴区", "房山区", "门头沟区", "昌平区", "平谷区", "密云区", "怀柔区", "延庆区"]
        },
        "上海市": {
            "上海市": ["黄浦区", "徐汇区", "长宁区", "静安区", "普陀区", "虹口区", "杨浦区", "闵行区", "宝山区", "嘉定区", "浦东新区", "金山区", "松江区", "青浦区", "奉贤区", "崇明区"]
        },
        "天津市": {
            "天津市": ["和平区", "河东区", "河西区", "南开区", "河北区", "红桥区", "东丽区", "西青区", "津南区", "北辰区", "武清区", "宝坻区", "滨海新区", "宁河区", "静海区", "蓟州区"]
        },
        "重庆市": {
            "重庆市": ["万州区", "黔江区", "涪陵区", "渝中区", "大渡口区", "江北区", "沙坪坝区", "九龙坡区", "南岸区", "北碚区", "渝北区", "巴南区", "长寿区", "江津区", "合川区"]
        },
        "江苏省": {
            "南京市": ["玄武区", "秦淮区", "建邺区", "鼓楼区", "浦口区", "栖霞区", "雨花台区", "江宁区", "六合区", "溧水区", "高淳区"],
            "苏州市": ["姑苏区", "虎丘区", "吴中区", "相城区", "吴江区", "常熟市", "张家港市", "昆山市", "太仓市"],
            "无锡市": ["梁溪区", "锡山区", "惠山区", "滨湖区", "新吴区", "江阴市", "宜兴市"]
        },
        "浙江省": {
            "杭州市": ["上城区", "下城区", "江干区", "拱墅区", "西湖区", "滨江区", "萧山区", "余杭区", "富阳区", "临安区", "桐庐县", "淳安县", "建德市"],
            "宁波市": ["海曙区", "江北区", "北仑区", "镇海区", "鄞州区", "奉化区", "象山县", "宁海县", "余姚市", "慈溪市"]
        }
    };
    
    // 初始化省份下拉框
    function initProvinces() {
        provinceSelect.innerHTML = '<option value="">请选择省份</option>';
        
        Object.keys(locationData).forEach(province => {
            const option = document.createElement('option');
            option.value = province;
            option.textContent = province;
            provinceSelect.appendChild(option);
        });
    }
    
    // 根据选中的省份更新城市下拉框
    function updateCities() {
        const selectedProvince = provinceSelect.value;
        
        // 重置状态
        citySelect.innerHTML = '';
        districtSelect.innerHTML = '<option value="">请先选择城市</option>';
        districtSelect.disabled = true;
        citySelect.classList.remove('hidden');
        
        if (selectedProvince && locationData[selectedProvince]) {
            if (municipalities.includes(selectedProvince)) {
                // 直辖市处理逻辑
                citySelect.classList.add('hidden');
                const defaultCity = Object.keys(locationData[selectedProvince])[0];
                updateDistricts(selectedProvince, defaultCity);
            } else {
                // 普通省份处理逻辑
                citySelect.disabled = false;
                citySelect.innerHTML = '<option value="">请选择城市</option>';
                
                Object.keys(locationData[selectedProvince]).forEach(city => {
                    const option = document.createElement('option');
                    option.value = city;
                    option.textContent = city;
                    citySelect.appendChild(option);
                });
            }
        } else {
            citySelect.disabled = true;
            citySelect.innerHTML = '<option value="">请先选择省份</option>';
        }
    }
    
    // 修复：根据选中的城市更新区县下拉框
    function updateDistricts(selectedProvince, selectedCity) {
        // 确定当前选中的省份和城市
        const province = selectedProvince || provinceSelect.value;
        const city = selectedCity || citySelect.value;
        
        // 清空区县下拉框
        districtSelect.innerHTML = '';
        
        // 检查是否有有效的省份和城市数据
        if (province && city && locationData[province] && locationData[province][city]) {
            // 加载区县数据
            districtSelect.disabled = false;
            districtSelect.innerHTML = '<option value="">请选择区县</option>';
            
            locationData[province][city].forEach(district => {
                const option = document.createElement('option');
                option.value = district;
                option.textContent = district;
                districtSelect.appendChild(option);
            });
        } else {
            // 根据不同情况显示不同提示
            if (!province) {
                districtSelect.innerHTML = '<option value="">请先选择省份</option>';
            } else {
                districtSelect.innerHTML = '<option value="">请先选择城市</option>';
            }
            districtSelect.disabled = true;
        }
    }
    
    // 显示提示消息
    function showToast(message, isSuccess = true) {
        toastMessage.textContent = message;
        
        if (isSuccess) {
            toast.className = 'fixed top-4 right-4 px-6 py-3 rounded-lg shadow-lg transform transition-all duration-300 translate-x-0 opacity-100 flex items-center bg-green-50 text-green-800 border border-green-200';
            toastIcon.className = 'fa fa-check-circle mr-2';
        } else {
            toast.className = 'fixed top-4 right-4 px-6 py-3 rounded-lg shadow-lg transform transition-all duration-300 translate-x-0 opacity-100 flex items-center bg-red-50 text-red-800 border border-red-200';
            toastIcon.className = 'fa fa-exclamation-circle mr-2';
        }
        
        setTimeout(() => {
            toast.className = 'fixed top-4 right-4 px-6 py-3 rounded-lg shadow-lg transform transition-all duration-300 translate-x-full opacity-0 flex items-center';
        }, 3000);
    }
    
    // 验证密码强度
    function validatePassword(password) {
        const lengthValid = password.length >= 8;
        const hasNumber = /\d/.test(password);
        const hasLetter = /[a-zA-Z]/.test(password);
        const hasSymbol = /[!@#$%^&*(),.?":{}|<>]/.test(password);
        
        const isValid = lengthValid && hasNumber && hasLetter && hasSymbol;
        
        if (password.length === 0) {
            passwordValidation.className = 'mt-1 text-xs hidden';
        } else if (isValid) {
            passwordValidation.className = 'mt-1 text-xs text-green-600';
            passwordValidation.innerHTML = '<i class="fa fa-check-circle mr-1"></i> 密码强度符合要求';
        } else {
            passwordValidation.className = 'mt-1 text-xs text-red-600';
            let message = '<i class="fa fa-exclamation-circle mr-1"></i> 密码不符合要求：';
            if (!lengthValid) message += ' 至少8个字符';
            if (!hasNumber) message += ' 需包含数字';
            if (!hasLetter) message += ' 需包含字母';
            if (!hasSymbol) message += ' 需包含英文符号';
            passwordValidation.innerHTML = message;
        }
        
        return isValid;
    }
    
    // 检查密码是否匹配
    function checkPasswordMatch() {
        const password = registerPassword.value;
        const confirm = confirmPassword.value;
        
        if (confirm.length === 0) {
            passwordMatch.className = 'mt-1 text-xs hidden';
            return false;
        }
        
        if (password === confirm) {
            passwordMatch.className = 'mt-1 text-xs text-green-600';
            passwordMatch.innerHTML = '<i class="fa fa-check-circle mr-1"></i> 密码匹配';
            return true;
        } else {
            passwordMatch.className = 'mt-1 text-xs text-red-600';
            passwordMatch.innerHTML = '<i class="fa fa-exclamation-circle mr-1"></i> 密码不匹配';
            return false;
        }
    }
    
    // 切换密码可见性
    function togglePasswordVisibility(passwordInput, toggleButton) {
        const type = passwordInput.getAttribute('type') === 'password' ? 'text' : 'password';
        passwordInput.setAttribute('type', type);
        
        if (type === 'password') {
            toggleButton.innerHTML = '<i class="fa fa-eye-slash"></i>';
        } else {
            toggleButton.innerHTML = '<i class="fa fa-eye"></i>';
        }
    }
    
    // 事件监听器
    showRegisterBtn.addEventListener('click', function() {
        loginSection.classList.add('hidden');
        registerSection.classList.remove('hidden');
    });
    
    showLoginBtn.addEventListener('click', function() {
        registerSection.classList.add('hidden');
        loginSection.classList.remove('hidden');
    });
    
    logoutBtn.addEventListener('click', function() {
        studentInfoSection.classList.add('hidden');
        loginSection.classList.remove('hidden');
        showToast('已成功退出登录');
    });
    
    toggleLoginPassword.addEventListener('click', function() {
        togglePasswordVisibility(loginPassword, toggleLoginPassword);
    });
    
    toggleRegisterPassword.addEventListener('click', function() {
        togglePasswordVisibility(registerPassword, toggleRegisterPassword);
    });
    
    registerPassword.addEventListener('input', function() {
        validatePassword(this.value);
        checkPasswordMatch();
    });
    
    confirmPassword.addEventListener('input', function() {
        checkPasswordMatch();
    });
    
    provinceSelect.addEventListener('change', updateCities);
    
    citySelect.addEventListener('change', function() {
        // 修复：普通省份选择城市时触发区县更新
        updateDistricts();
    });
    
    loginForm.addEventListener('submit', function(e) {
        e.preventDefault();
        
        const username = document.getElementById('login-username').value;
        const password = loginPassword.value;
        
        if (!username || !password) {
            showToast('请输入用户名和密码', false);
            return;
        }
        
        showToast('登录成功，正在进入系统...');
        setTimeout(() => {
            loginSection.classList.add('hidden');
            studentInfoSection.classList.remove('hidden');
        }, 1000);
    });
    
    registerForm.addEventListener('submit', function(e) {
        e.preventDefault();
        
        const username = document.getElementById('register-username').value;
        const password = registerPassword.value;
        const confirm = confirmPassword.value;
        
        if (!username) {
            showToast('请输入用户名', false);
            return;
        }
        
        if (!validatePassword(password)) {
            showToast('密码不符合要求', false);
            return;
        }
        
        if (!checkPasswordMatch()) {
            showToast('两次输入的密码不匹配', false);
            return;
        }
        
        showToast('注册成功，请登录');
        setTimeout(() => {
            registerSection.classList.add('hidden');
            loginSection.classList.remove('hidden');
            registerForm.reset();
            passwordValidation.className = 'mt-1 text-xs hidden';
            passwordMatch.className = 'mt-1 text-xs hidden';
        }, 1000);
    });
    
    studentInfoForm.addEventListener('submit', function(e) {
        e.preventDefault();
        
        const birthdate = document.getElementById('birthdate').value;
        const birthdatePattern = /^\d{8}$/;
        if (!birthdatePattern.test(birthdate)) {
            showToast('出生日期格式不正确，请使用yyyymmdd格式', false);
            return;
        }
        
        showToast('学生信息保存成功');
    });
    
    // 初始化省份数据
    initProvinces();
});
    </script>
</body>
</html>
